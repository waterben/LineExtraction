{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "configure-cmake-debug",
      "type": "shell",
      "command": "cmake -S ${workspaceFolder} -B ${workspaceFolder}/build/Debug -DCMAKE_BUILD_TYPE=Debug",
      "group": {
        "kind": "build",
        "isDefault": false
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "revealProblems": "onProblem",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true,
      },
      "detail": "Configure CMake project for Debug builds"
    },
    {
      "label": "build-cmake-debug-run",
      "type": "shell",
      "command": "cmake --build ${workspaceFolder}/build/Debug --config Debug --target ${input:cmakeBuildTarget}",
      "group": {
        "kind": "build",
        "isDefault": false
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "revealProblems": "onProblem",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true,
      },
      "detail": "Build CMake Debug target"
    },
    {
      "label": "build-cmake-debug",
      "type": "shell",
      "command": "echo \"configure-cmake-debug && build-cmake-debug-run\"",
      "dependsOrder": "sequence",
      "dependsOn": [
        "configure-cmake-debug",
        "build-cmake-debug-run"
      ],
      "group": {
        "kind": "build",
        "isDefault": false
      },
      "presentation": {
        "echo": true,
        "reveal": "always",
        "revealProblems": "onProblem",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true,
      },
      "problemMatcher": [],
      "detail": "Configure and build CMake Debug target"
    },
    {
      "label": "build",
      "type": "shell",
      "command": "bazel build //...",
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "echo": true,
        "reveal": "silent",
        "revealProblems": "onProblem",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true,
      },
      "detail": "Build project using bazel"
    },
    {
      "label": "build & compile commands",
      "type": "shell",
      "command": "bazel build //... && ${workspaceFolder}/tools/scripts/generate_compile_commands.sh",
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "echo": true,
        "reveal": "silent",
        "revealProblems": "onProblem",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true,
      },
      "detail": "Build project using bazel"
    },
    {
      "label": "build-binary-debug",
      "type": "shell",
      "command": "bazel build --features=debugging_feature ${input:bazelBinaryTargetsTask}",
      "presentation": {
        "echo": true,
        "reveal": "silent",
        "revealProblems": "onProblem",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true,
        "close": false
      },
      "detail": "Build project using bazel"
    },
    {
      "label": "build-test-debug",
      "type": "shell",
      "command": "bazel build --features=debugging_feature ${input:bazelTestTargetsTask}",
      "presentation": {
        "echo": true,
        "reveal": "silent",
        "revealProblems": "onProblem",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true,
        "close": false
      },
      "detail": "Build project using bazel"
    },
    {
      "label": "build-python-debug",
      "type": "shell",
      "command": "bazel build --features=debugging_feature ${input:bazelPythonTargetsTask}",
      "presentation": {
        "echo": true,
        "reveal": "silent",
        "revealProblems": "onProblem",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true,
        "close": false
      },
      "detail": "Build project using bazel"
    },
    {
      "label": "build-python-test-debug",
      "type": "shell",
      "command": "bazel build --features=debugging_feature ${input:bazelPythonTestTargetsTask}",
      "presentation": {
        "echo": true,
        "reveal": "silent",
        "revealProblems": "onProblem",
        "focus": false,
        "panel": "shared",
        "showReuseMessage": false,
        "clear": true,
        "close": false
      },
      "detail": "Build project using bazel"
    },
  ],
  "inputs": [
    {
      "id": "cmakeBuildTarget",
      "type": "promptString",
      "description": "CMake target to build (use 'all' for the default target)",
      "default": "all"
    },
    {
      "id": "bazelBinaryTargetsTask",
      "type": "command",
      "command": "shellCommand.execute",
      "args": {
        "command": "cd ${workspaceFolder}/ && bash ${workspaceFolder}/.vscode/find_debug_targets.sh task cc_binary ",
        "description": "Please select a build target"
      }
    },
    {
      "id": "bazelTestTargetsTask",
      "type": "command",
      "command": "shellCommand.execute",
      "args": {
        "command": "cd ${workspaceFolder}/ && bash ${workspaceFolder}/.vscode/find_debug_targets.sh task cc_test",
        "description": "Please select a build target"
      }
    },
    {
      "id": "bazelPythonTargetsTask",
      "type": "command",
      "command": "shellCommand.execute",
      "args": {
        "command": "cd ${workspaceFolder}/ && bash ${workspaceFolder}/.vscode/find_debug_targets.sh task py_binary ",
        "description": "Please select a build target"
      }
    },
    {
      "id": "bazelPythonTestTargetsTask",
      "type": "command",
      "command": "shellCommand.execute",
      "args": {
        "command": "cd ${workspaceFolder}/ && bash ${workspaceFolder}/.vscode/find_debug_targets.sh task py_test",
        "description": "Please select a build target"
      }
    },
  ]
}
